import os
import polars as pl
import backend.config as config
import backend.utils as utils
from backend.pipelines.pipeline import DataPipeline
from backend.pipelines.ingestors import YFinancePriceIngestor,CSVPriceIngestor, YFinanceCorporateActionsIngestor

# Configuration
yfinance_batch_size = 100
start_date = "1970-01-01"
end_date = "2025-06-01"
csv_base_path = config.EXTERNAL_DATA_BASE_PATH
csv_ticker_source_map = utils.get_csv_ticker_source_map()
parquet_price_save_path = config.get_parquet_price_base_path()
parquet_corporate_actions_save_path = config.get_parquet_corporate_action_base_path()
csv_price_save_path = config.get_csv_price_path()
csv_corporate_actions_save_path = config.get_csv_corporate_action_path()

# Ticker lists
yfinance_tickers_ukstock = utils.get_yfinance_tickers("uk stock")
yfinance_tickers_cryptocurrency = utils.get_yfinance_tickers("cryptocurrency")
yfinance_tickers_etf = utils.get_yfinance_tickers("etf")
yfinance_tickers_usstock = utils.get_yfinance_tickers("us stock")
yfinance_tickers_mutualfund = utils.get_yfinance_tickers("mutual fund")

# Instantiate list of ingestors
price_ingestors = []
corporate_action_ingestors = []